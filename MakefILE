# Variables Ã  adapter
IMAGE_NAME = monimage
TAG = latest
REGISTRY = ton-registry-docker.io/ton-utilisateur

# Construire l'image Docker avec le Dockerfile dans le dossier courant
build:
	docker build -t $(IMAGE_NAME):$(TAG) .

# Taguer et pousser l'image sur le registry
push:
	docker tag $(IMAGE_NAME):$(TAG) $(REGISTRY)/$(IMAGE_NAME):$(TAG)
	docker push $(REGISTRY)/$(IMAGE_NAME):$(TAG)

# Tirer l'image depuis le registry
pull:
	docker pull $(REGISTRY)/$(IMAGE_NAME):$(TAG)

# Lancer un conteneur exposant le port 8080 (pour ton app FrankenPHP)
run:
	docker run --rm -it -p 8080:8080 $(IMAGE_NAME):$(TAG)
